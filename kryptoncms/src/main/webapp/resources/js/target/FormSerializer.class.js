define(["jquery","libraries/mootools-base"],function(e,t){var n=new t.Class({Implements:[t.Options],options:{format:"json"},initialize:function(e){this.setOptions(e)}.protect(),serialize:function(e,t){if(t){var n=this.options;this.setOptions(t)}var r=this["serializeTo_"+this.options.format](e);return t&&this.setOptions(n),r},serializeTo_json:function(t){var n={};return t.find("[name]").each(function(){e(this).attr("type")!="hidden"&&(e(this).attr("type")=="checkbox"?n[e(this).attr("name")]=e(this).is(":checked"):n[e(this).attr("name")]=e(this).val()==""?null:e(this).val())}),n}.protect(),serializeTo_urlencoded:function(e){return e.serialize()}.protect(),setForm:function(e){this.$form=e}});return n.self=null,n.getInstance=function(e){return n.self==null&&(n.self=new n(e)),n.self},n});