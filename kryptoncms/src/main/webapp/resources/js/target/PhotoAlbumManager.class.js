define(["jquery","libraries/mootools-base","libraries/jquery.tmpl"],function(e,t){var n=new t.Class({$photoAlbums:e(),initialize:function(){e("#showComments").click(function(){var t=e("img.in").attr("src"),n;e("img").each(function(){e(this).attr("src")==t&&(n=e(this).attr("id"))});var r="http://localhost:8080/kryptoncms/comments/Photo/"+n;e.ajax({url:r,type:"GET",dataType:"json",cache:!1,contentType:"application/json",success:function(t){if(t.successful){var n=e("#comments-tmpl").tmpl(t.queryResult);e("#commentBody").html(n),alert("successful ok")}else alert("Comment successful else")},error:function(e){alert("Comment error")}})}),e(".modal-prev").click(function(){e("#commentBody").html(null)}),e(".modal-next").click(function(){e("#commentBody").html(null)})},listPhotoAlbums:function(){var t=decodeURIComponent((RegExp("album_number=(.+?)(&|$)","i").exec(location.search)||[,""])[1]);e.ajax({url:"http://localhost:8080/kryptoncms/photo/Album/"+t,type:"GET",dataType:"json",cache:!1,contentType:"application/json",success:function(t){console.log("Test - LIST - PHOTOS");if(t.successful){console.log("Test - LIST - PHOTOS - SUCCESSFUL");var n=e("#photo-tmpl").tmpl(t.queryResult);console.log("photos is"),console.log(t.queryResult),n.appendTo(e("#gallery")),console.log(n)}else alert("Success Else")},error:function(e){console.log(e)}})},listAlbums:function(){console.log("Test - LIST - ALBUMS"),e.ajax({url:"http://localhost:8080/kryptoncms/photo/albums",type:"GET",dataType:"json",cache:!1,contentType:"application/json",success:function(t){if(t.successful){var n=e("#album-tmpl").tmpl(t.queryResult);console.log(n),n.appendTo(e("#albums"))}else alert("Success Else")},error:function(e){console.log(e)}})}});return n});